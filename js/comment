document.addEventListener('DOMContentLoaded', function () {
  const filterSelect = document.querySelector('.suite-filter');
  const swiperContainer = document.querySelector('.suite-swiper .swiper-wrapper');
  const allSlides = Array.from(document.querySelectorAll('.suite-swiper .swiper-slide'));
  let suiteSwiper;

  // Save original slides to memory for reuse
  const originalSlides = allSlides.map(slide => slide.cloneNode(true));

  const prevBtn = document.querySelector('.carousel-prev');
  const nextBtn = document.querySelector('.carousel-next');

  function initSwiper() {
    if (suiteSwiper) suiteSwiper.destroy(true, true);

    const totalSlides = document.querySelectorAll('.suite-swiper .swiper-slide').length;

    // âœ… Hide arrows if there are <= 2 slides
    if (totalSlides <= 2) {
      prevBtn.style.display = 'none';
      nextBtn.style.display = 'none';
    } else {
      prevBtn.style.display = '';
      nextBtn.style.display = '';
    }

    // âœ… Enable loop only if we have enough slides
    const enableLoop = totalSlides > 3;

    suiteSwiper = new Swiper('.suite-swiper', {
      slidesPerView: 1,
      spaceBetween: 30,
      loop: enableLoop,
      navigation: {
        nextEl: '.carousel-next',
        prevEl: '.carousel-prev',
      },
      breakpoints: {
        768: {
          slidesPerView: 2,
        },
        1024: {
          slidesPerView: 3,
        },
      },
    });
  }

  function filterSlides(category) {
    swiperContainer.innerHTML = ''; // Clear existing slides

    // Filter slides based on category
    const filteredSlides = originalSlides.filter(slide => {
      const slideCategory = slide.getAttribute('data-category');
      return category === 'all category' || slideCategory === category;
    });

    // Append filtered slides
    filteredSlides.forEach(slide => swiperContainer.appendChild(slide));

    // Re-initialize Swiper after filtering
    initSwiper();
  }

  // Initialize with all slides
  filterSlides('all category');

  // On filter change
  if (filterSelect) {
    filterSelect.addEventListener('change', function () {
      const selected = this.value.toLowerCase();
      filterSlides(selected);
    });
  }
});


document.addEventListener('DOMContentLoaded', function () {
  const offersSwiper = new Swiper('.offers-swiper', {
    slidesPerView: 3,
    spaceBetween: 30,
    loop: true,
    navigation: {
      nextEl: '.offers-next',
      prevEl: '.offers-prev',
    },
    breakpoints: {
      0: {
        slidesPerView: 1
      },
      768: {
        slidesPerView: 1.5
      },
      1024: {
        slidesPerView: 2.5
      },
      2001: {
        slidesPerView: 3.5
      }
    }


  });
});


document.addEventListener('DOMContentLoaded', function () {
  const filterSelect = document.querySelector('.suite-filter');
  const allSlides = document.querySelectorAll('.suite-swiper .swiper-slide');
  const swiperWrapper = document.querySelector('.suite-swiper .swiper-wrapper');

  // run only if filter and swiper exist
  if (filterSelect && swiperWrapper && allSlides.length > 0) {
    function updateSlideVisibility() {
      const selected = filterSelect.value.toLowerCase();
      let visibleCount = 0;

      allSlides.forEach(slide => {
        const category = slide.getAttribute('data-category');
        if (selected === 'all category' || category === selected) {
          slide.style.display = 'block';
          visibleCount++;
        } else {
          slide.style.display = 'none';
        }
      });

      if (visibleCount === 1) {
        swiperWrapper.classList.add('single-slide');
      } else {
        swiperWrapper.classList.remove('single-slide');
      }

      if (window.suiteSwiper) {
        window.suiteSwiper.update();
      }
    }

    filterSelect.addEventListener('change', updateSlideVisibility);

    updateSlideVisibility();
  }
});



document.addEventListener("DOMContentLoaded", function () {
  const hamburger = document.querySelector(".hamburger-menu");
  const nav = document.querySelector(".main-nav");

  hamburger.addEventListener("click", function () {
    nav.classList.toggle("active");
  });
});


// Premium Swiper 
var premiumSwiper = new Swiper(".premiumSwiper", {
  slidesPerView: 1,
  spaceBetween: 24,
  loop: true,
  navigation: {
    nextEl: ".premium-next",
    prevEl: ".premium-prev",
  },
  watchOverflow: false,
  breakpoints: {
    768: {
      slidesPerView: 1.2,
    },
    0: {
      slidesPerView: 1.2,
    }
  }
});



$(document).ready(function () {
  $(".view-all").click(function () {
    const fullText = $(".full-text");
    const btn = $(this);

    fullText.slideToggle(300, function () {

      if (fullText.is(":visible")) {
        btn.text("SHOW LESS").addClass("expanded");
      } else {
        btn.text("VIEW ALL").removeClass("expanded");
      }
    });
  });
});

$(document).ready(function () {
  $(".view-all1").click(function () {
    const fullText = $(".full-text1");
    const btn = $(this);

    fullText.slideToggle(300, function () {

      if (fullText.is(":visible")) {
        btn.text("SHOW LESS").addClass("expanded");
      } else {
        btn.text("VIEW ALL").removeClass("expanded");
      }
    });
  });
});



const wrapper = document.querySelector('.card-wrapper');
const cards = wrapper.querySelectorAll('.card-item');

if (window.innerWidth >= 768) {
  wrapper.classList.add('hover-center');
} else {
  wrapper.classList.remove('hover-left', 'hover-center', 'hover-right');

  // ðŸ‘‰ make the first card active on mobile
  const firstCard = cards[0];
  if (firstCard) {
    wrapper.classList.add('hover-left'); // or 'hover-center' if you want centered
  }
}

cards.forEach(card => {
  card.addEventListener('mouseenter', () => {
    wrapper.classList.remove('hover-left', 'hover-center', 'hover-right');

    if (card.classList.contains('left')) {
      wrapper.classList.add('hover-left');
    } else if (card.classList.contains('center')) {
      wrapper.classList.add('hover-center');
    } else if (card.classList.contains('right')) {
      wrapper.classList.add('hover-right');
    }
  });

  card.addEventListener('mouseleave', () => {
    if (window.innerWidth >= 768) {
      wrapper.classList.remove('hover-left', 'hover-right');
      wrapper.classList.add('hover-center');
    } else {
      wrapper.classList.remove('hover-left', 'hover-center', 'hover-right');
      // ðŸ‘‰ keep first card active again when leaving
      const firstCard = cards[0];
      if (firstCard) {
        wrapper.classList.add('hover-left');
      }
    }
  });
});



// document.addEventListener('DOMContentLoaded', function () {
//     const wrapper = document.querySelector('.card-wrapper');
//     const cards = document.querySelectorAll('.card-item');

//     cards.forEach(card => {
//       card.addEventListener('mouseenter', () => {
//         wrapper.classList.remove('hover-left', 'hover-center', 'hover-right');
//         if (card.classList.contains('left')) wrapper.classList.add('hover-left');
//         if (card.classList.contains('center')) wrapper.classList.add('hover-center');
//         if (card.classList.contains('right')) wrapper.classList.add('hover-right');
//       });

//       card.addEventListener('mouseleave', () => {
//         wrapper.classList.remove('hover-left', 'hover-center', 'hover-right');
//       });
//     });
//   });




document.addEventListener("DOMContentLoaded", function () {
  const slides = document.querySelectorAll(".suite-swiper .swiper-slide");
  if (slides.length <= 3) {
    document.querySelector(".carousel-prev").setAttribute("disabled", true);
    document.querySelector(".carousel-next").setAttribute("disabled", true);
  }
});


// //continental suites
// document.addEventListener('DOMContentLoaded', function () {
//   const header = document.querySelector('.continental-site-header1');
//   window.addEventListener('scroll', function () {
//     if (window.scrollY > 50) {
//       header.classList.add('scrolled');
//     } else {
//       header.classList.remove('scrolled');
//     }
//   });
// });

document.addEventListener("DOMContentLoaded", function () {
  const hamburger = document.querySelector(".hamburger-menu");
  const mobileNav = document.querySelector(".mobile-nav");

  hamburger.addEventListener("click", function () {
    mobileNav.classList.toggle("active");
    hamburger.classList.toggle("open");
  });
});


// //tooltip email
//    document.querySelectorAll(".tooltip-email").forEach(emailLink => {
//   const wrapper = document.createElement("span");
//   wrapper.classList.add("email-wrapper");

//   // Wrap email link
//   emailLink.parentNode.insertBefore(wrapper, emailLink);
//   wrapper.appendChild(emailLink);

//   // Tooltip
//   const tooltip = document.createElement("div");
//   tooltip.classList.add("email-tooltip");
//   tooltip.innerHTML = `
//     <button type="button" class="copy-btn">ðŸ“§ Copy ${emailLink.dataset.email}</button>
//     <button type="button" class="send-btn">Send mail</button>
//   `;
//   wrapper.appendChild(tooltip);

//   // Copy
//   tooltip.querySelector(".copy-btn").addEventListener("click", () => {
//     navigator.clipboard.writeText(emailLink.dataset.email).then(() => {
//       tooltip.querySelector(".copy-btn").textContent = "âœ… Copied!";
//       setTimeout(() => {
//         tooltip.querySelector(".copy-btn").textContent = `ðŸ“§ Copy ${emailLink.dataset.email}`;
//       }, 2000);
//     });
//   });

//   // Send
//   tooltip.querySelector(".send-btn").addEventListener("click", () => {
//     window.location.href = `mailto:${emailLink.dataset.email}`;
//   });
// });


// //tool tip link


<div class="mega-menu">
        <div class="mega-menu-content container">

          <!-- Left: Main Menu Pages -->
          <nav class="menu-links">
            <?php
            wp_nav_menu([
              'theme_location' => 'mega-menu',
              'container' => false,
              'menu_class' => 'main-mega-menu',
            ]);
            ?>
          </nav>

          <!-- Middle + Right: Submenu for Rooms & Suites -->
          <div class="submenu-wrapper">

            <!-- Right: Rooms & Suites -->
            <div class="submenu">
              <ul class="submenu-list">
                <?php
                $args = [
                  'post_type' => 'room',
                  'posts_per_page' => -1,
                  'orderby' => 'menu_order',
                  'order' => 'ASC',
                ];
                $rooms = new WP_Query($args);

                if ($rooms->have_posts()):
                  while ($rooms->have_posts()):
                    $rooms->the_post();
                    $post_id = get_the_ID();
                    ?>
                    <li data-image="room-<?php echo $post_id; ?>">
                      <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
                    </li>
                  <?php endwhile;
                  wp_reset_postdata();
                endif;
                ?>
              </ul>

              <!-- Images -->
              <div class="submenu-image">
                <?php
                $rooms = new WP_Query($args);
                if ($rooms->have_posts()):
                  while ($rooms->have_posts()):
                    $rooms->the_post();
                    $post_id = get_the_ID();
                    $image_summer = get_field('image_summer', $post_id);
                    $image_winter = get_field('image_winter', $post_id);

                    if ($image_summer): ?>
                      <img src="<?php echo esc_url($image_summer['url']); ?>"
                        alt="<?php echo esc_attr($image_summer['alt']); ?>" class="suite-image"
                        id="room-<?php echo $post_id; ?>-summer" />
                    <?php endif;

                    if ($image_winter): ?>
                      <img src="<?php echo esc_url($image_winter['url']); ?>"
                        alt="<?php echo esc_attr($image_winter['alt']); ?>" class="suite-image winter"
                        id="room-<?php echo $post_id; ?>-winter" />
                    <?php endif;

                  endwhile;
                  wp_reset_postdata();
                endif;
                ?>
              </div>
            </div>

          </div>
        </div>


      </div>






       @media (min-width: 991px) and (max-width: 1262px) {
    .arrow-btn {

      // @include arrow-btn;
      // position: absolute;
      // top: -17%;
      // z-index: 10;
      // background: none;
      // border: none;

      cursor: pointer;
      @include flex-center;
      transition: transform 0.3s ease;
      width: 38px;
      height: 38px;
      border-radius: 50%;

      &:hover {
        background-color: var(--arrow-bg-color);
      }

      svg {
        width: 38px !important;

        height: 38px !important;
        min-width: 38px;
        min-height: 38px;
        max-width: 48px;
        max-height: 48px;

        path {
          // stroke: #000;
          // transition: stroke 0.3s ease;
        }
      }

      &:hover {
        transform: scale(1.1);

        svg path {
          stroke: var(--arrow-color);
        }

      }



      &.carousel-prev {
        // left: calc(100% - 140px);
        left: -30px;
        

        @include respond (custom) {
          
        }
      }

      &.carousel-next {
        right: -30px;

        // @include respond (custom) {
        //   right: -40px;
        // }
      }
    }
  }